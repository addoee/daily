#### 浏览器缓存

##### DNS缓存

在浏览器输入网址，通常会通过DNS服务器来查找网址对应的IP，这个过程实际对网络请求带来一定的损耗，所以浏览器在第一次获取到IP地址以后，会将其缓存起来。

##### HTTP缓存

* 强制缓存（强缓存）

  强缓存有两个字段：``Expires``  和``Cache-control`` 

  ``Cache-control`` 比``Expires`` 优先级高

  我们可以打开一个网站看下它响应头中：

  ![响应头](E:\github\daily\img\响应头.png)

  其中``cache-control: public,max-age=25920000`` 就是请求服务器以后，服务器希望把资源缓存下来，其中25920000为秒。

  ``Cache-control`` 是HTTP/1.1时期使用的，它表示的是多长时间缓存过期

  ``Expires`` 是HTTP/1.0时期使用的，它表示的是到哪个时间缓存过期，如下：

  ``Expires: Sun, 12 Dec 2021 12:12:00 GMT``  它就表示是在2021年12月12日12时12分过期，但是它有一个弊端，如果服务器时间和浏览器时间不一致的话，这个过期时间就是不准确的，所以在HTTP/1.1中就抛弃了这个，但是通常还是会写这两个字段。

* 协商缓存

  当强缓存失效，浏览器在请求头中携带缓存标识符，有服务器根据标识符来确定是否使用缓存，这个就是协商缓存。

  它同样也有两个标识符：``Last-Modified`` 和 ``Etag`` 

  ``Last-Modified`` :最后修改时间,浏览器发送请求，服务器在返回头中加入``Last-Modified`` ,浏览器再次请求时会携带``If-Modified-Since`` 这个字段，它的值就是服务器第一次传来的值，服务器接收到这个值，会拿着这个值和服务器中请求的资源文件的最后修改时间作对比。如果这个值比文件资源的修改时间小，就更新缓存；否则就返回304，继续使用缓存

  ``Etag`` :根据文件内容生成唯一标识，当文件内容有改动，标识符也会改变。浏览器收到服务器返回的``Etag`` 值，在下一次请求携带这个值，存放在``If-None-Match`` ,服务器通过对比这个值，告诉浏览器是否更新。如果不一致,返回新的资源，否则就返回304，继续使用缓存。

  